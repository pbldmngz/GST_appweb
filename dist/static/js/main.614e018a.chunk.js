(this["webpackJsonpgst-myapp"]=this["webpackJsonpgst-myapp"]||[]).push([[0],{567:function(e,a,t){},735:function(e,a){},737:function(e,a){},748:function(e,a){},750:function(e,a){},775:function(e,a){},777:function(e,a){},778:function(e,a){},783:function(e,a){},785:function(e,a){},804:function(e,a){},816:function(e,a){},819:function(e,a){},944:function(e,a,t){"use strict";t.r(a);var r,s,n=t(0),i=t.n(n),c=t(38),o=t.n(c),l=(t(567),t(16)),u=t(19),d=t(20),h=t(21),p=t(34),j=t(27),b=t(49),f=t(48),g={profile:"/profile",sign_in:"/signin",sign_up:"/signup",crear_auditoria:"/crear-auditoria",areas:"/areas",auditoria:"/auditoria/:id",auditorias:"/",editar_auditoria:"/editar-auditoria",editar_auditoria_redirect:"/editar-auditoria/:id",responder_auditoria:"/responder-auditoria",responder_auditoria_redirect:"/responder-auditoria/:id",auditorias_area:"/area/:id",preguntas:"/preguntas",preguntas_detalles:"/detalles-pregunta",preguntas_detalles_redirect:"/detalles-pregunta/:id",crear_pregunta:"/crear-pregunta",detalles_preguntas_auditoria:"/detalles-preguntas-auditoria",detalles_preguntas_auditoria_redirect:"/detalles-preguntas-auditoria/:id",detalles_pregunta_auditoria:"/detalles-pregunta-auditoria",detalles_pregunta_auditoria_redirect:"/detalles-pregunta-auditoria/:id",editar_pregunta:"/editar-pregunta",editar_pregunta_redirect:"/editar-pregunta/:id",change_password:"/change_password",mainproceso:"/mainproceso"},m=t(1),O=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{signOut:function(){return e((function(e,a,t){(0,t.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var a=g;return e.auth.uid?Object(m.jsxs)("div",{className:"padre-titulo nav",children:[Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("div",{className:"perfil",children:Object(m.jsx)(p.b,{to:a.profile,className:"center-box",children:Object(m.jsx)(f.a,{icon:b.b})})})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)(p.c,{to:a.auditorias,className:"",children:Object(m.jsx)("b",{children:"Global Safety Textiles"})})})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("div",{className:"imout hover-cursor",onClick:function(){e.signOut(),e.history&&e.history.push("/signin")},children:Object(m.jsx)(f.a,{icon:b.f})})})]}):null})),v=t(15),x=t(40),N=t(9),C=t(239),y=t.n(C),w=t(45),S=t.n(w),A=t(82),_=function(e){return function(a,t,r){r.getFirebase;var s=(0,r.getFirestore)(),n=t().firebase.profile,i=t().firebase.auth.uid;s.collection("auditorias").add(Object(N.a)(Object(N.a)({},e),{},{createdBy:n.firstName+" "+n.lastName,createdAt:new Date,authorId:i})).then((function(){a({type:"CREATE_AUDITORIA"},e)})).catch((function(e){a({type:"CREATE_AUDITORIA_ERROR"},e)}))}},E=function(e,a){return function(t,r,s){s.getFirebase;var n=(0,s.getFirestore)(),i=r().firebase.profile,c=r().firebase.auth.uid;n.collection("auditorias").doc(e).update(Object(N.a)(Object(N.a)({},a),{},{updatedAt:new Date,updatedBy:i.firstName+" "+i.lastName,editorId:c})).then((function(){t({type:"EDIT_AUDITORIA"},a)})).catch((function(e){t({type:"EDIT_AUDITORIA_ERROR"},e)}))}},P=function(){var e=Object(A.a)(S.a.mark((function e(a,t,r,s){var n,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(),i=n.collection(r).doc(s),e.abrupt("return",i.get().then((function(e){if(e.exists)return Object(N.a)(Object(N.a)({},e.data()),{},{id:s})})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})));return function(a,t,r,s){return e.apply(this,arguments)}}(),R=function(){var e=Object(A.a)(S.a.mark((function e(a,t,r,s,n){var i,c,o,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t(),c=i.collection(r).where(s,"==",n),e.next=4,c.get();case 4:return o=e.sent,l=[],o.empty?console.log("No matching documents."):o.forEach((function(e){l.push(e.data())})),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(a,t,r,s,n){return e.apply(this,arguments)}}(),D=function(e){return function(a,t,r){r.getFirebase;return(0,r.getFirestore)().collection("auditorias").doc(e).get().then((function(e){if(e.exists)return e.data()})).catch((function(e){console.log(e)}))}},k=t(25),F=t.n(k),T=t(39),I=t(41),L=t(1027),B=t(1043),U=t(1026),K=t(1025),G=t(1019),Q=t(31),W={spanish:{locale:"es",return:"Volver",cargando:"Cargando...",aceptar:"Aceptar",guardar:"Guardar",cancelar:"Cancelar",swal:{title:"\xbfGuardar cambios?",cancel:"Descartar",save:"Guardar",saved:"Guardado!",not_saved:"Los cambios no se guardaron"},area_proceso:(r={crear:"Crear",editar:"Editar",area:"\xe1rea",Area:"\xc1rea",proceso:"proceso",Proceso:"Proceso",urgencia:"Prioridad",proceso_corresponde:"Proceso al que corresponde",crear_area:"Crear nueva \xe1rea",crear_proceso:"Crear nuevo proceso",regular:"Prioridad normal",media:"Prioridad media",prioridad:"Prioritario",alta_prioridad:"Alta prioridad"},Object(Q.a)(r,"crear_area","Guardar"),Object(Q.a)(r,"crear_proceso","Guardar"),Object(Q.a)(r,"agregar_pregunta","Agregar pregunta"),Object(Q.a)(r,"procesos","Procesos"),Object(Q.a)(r,"areas","\xc1reas de trabajo"),Object(Q.a)(r,"grafica_global","Gr\xe1fica global"),r),auditorias:{auditorias:{nada:"Parece que todo ha estado calmado \xfaltimamente"},crearAuditoria:{crear_auditoria:"Asignar LPA",editar_auditoria:"Editar auditoria",nombre_auditoria:"Nombre de la auditoria",auditor:"Auditor",proceso:"Proceso",area:"\xc1rea",termina_el:"Fin:",inicia_el:"Inicio:",agregar:"Agregar",cancelar:"Cancelar",seleccionar_pregunta:"Seleccionar pregunta",text1:"Busca y selecciona las preguntas que desees a\xf1adir o ",text2:" crea una pregunta nueva, ",text3:"una vez creada la podr\xe1s seleccionar en esta lista.",crear:"Asignar",editar:"Guardar"},dashboardAuditorias:{ordenar_fecha:"Ordenar por fecha",agrupar_areas:"Ir a la vista de procesos",mostrar_realizados:"Mostrar realizados",fecha_inicio:"Fecha de inicio",fecha_expiracion:"Fecha de expiraci\xf3n",fecha_creacion:"Fecha de creaci\xf3n",area:"\xc1rea",proceso:"Proceso",auditor:"Auditor",vista:"Vista",auditorias:"Auditor\xedas Programadas"},detallesAuditoria:{auditor:"Auditor",descripcion:"Descripci\xf3n",plan_reaccion:"Plan de reacci\xf3n",creada_por:"Creada por",fecha_inicio:"Fecha de inicio",fecha_finalizacion:"Fecha de finalizaci\xf3n",preguntas:"Preguntas (esto es un array, ya veremos como se arregla esto)"},responderAuditoria:{responder_auditoria:"Responder auditoria",justificacion:"Justificaci\xf3n",si:"S\xed",no:"No",enviar:"Enviar",scan_qr:"Escanea el c\xf3digo QR"},tarjetaAuditoria:{fecha_limite:"Fecha l\xedmite",auditor:"Auditor",proceso:"Proceso",password:"Contrase\xf1a",assignedBy:"Asignada por"}},auth:{changePassword:{cambiar_contrasena:"Cambiar contrase\xf1a",contrasena_actual:"Contrase\xf1a actual",contrasena_nueva:"Contrase\xf1a nueva",repite_contrasena:"Repite la contrase\xf1a nueva",aceptar:"Aceptar",cancelar:"Cancelar"},signIn:{correo:"Correo",contrasena:"Contrase\xf1a",iniciar_sesion:"Iniciar sesi\xf3n"},signUp:{registrar:"Registrar",correo:"Correo",contrasena:"Contrase\xf1a",nombre:"Nombre",apellido:"Apellidos",capa:"Capa",registrar_auditor:"Registrar auditor"}},layout:{navbar:{},signedInLinks:{},signedOutLinks:{}},preguntas:{crearPregunta:{crear_pregunta:"Crear pregunta",pregunta:"Pregunta",descripcion:"Descripci\xf3n",plan_reaccion:"Plan de reacci\xf3n",categoria:"Capa",crear:"Crear",editar:"Guardar",editar_pregunta:"Editar pregunta",fix:"Arreglar inmediatamente",contramedidas_temporales:"Tomar contramedidas temporales",parar_produccion:"Parar la producci\xf3n"},dashboardPreguntas:{creacion_preguntas:"Elementos de Verificaci\xf3n LPA"},detallesPregunta:{descripcion:"Prop\xf3sito",categoria:"Capa",plan_reaccion:"Plan de reacci\xf3n",creado_por:"Creado por",creado:"Creado",ver_respuestas:"Respuestas"},detallesPreguntaIndividual:{},detallesPreguntasAuditoria:{respuestas_auditoria:"Respuestas de la auditor\xeda"},preguntaGrafica:{},preguntas:{},tarjetaPregunta:{}},opciones:{opciones:"Opciones",idioma:"Idioma",cambiar_contrasena:"Cambiar contrase\xf1a",registrar_auditor:"Registrar nuevo auditor",preguntas:"Preguntas",procesos:"Procesos",areas:"\xc1reas"}},english:{locale:"en",return:"Return",cargando:"Loading...",aceptar:"Accept",guardar:"Save",cancelar:"Cancel",swal:{title:"Do you want to save the changes?",cancel:"Don't save",save:"Save",saved:"Saved!",not_saved:"Changes are not saved"},area_proceso:(s={crear:"Create",editar:"Edit",area:"area",Area:"Area",procesos:"Processes",areas:"Work area",proceso:"process",Proceso:"Process",urgencia:"Priority",proceso_corresponde:"Process where it belongs",crear_area:"Create new area",crear_proceso:"Create new process",regular:"Regular priority",media:"Medium priority",prioridad:"Priority",alta_prioridad:"High priority"},Object(Q.a)(s,"crear_area","Save"),Object(Q.a)(s,"crear_proceso","Save"),Object(Q.a)(s,"agregar_pregunta","Add question"),Object(Q.a)(s,"grafica_global","Global chart"),s),auditorias:{auditorias:{nada:"It seems that everything has been calm lately"},crearAuditoria:{crear_auditoria:"Assign LPA",editar_auditoria:"Edit",nombre_auditoria:"Audit name",auditor:"Auditor",proceso:"Process",area:"Area",termina_el:"Due",inicia_el:"Start",agregar:"Add",cancelar:"Cancel",seleccionar_pregunta:"Select question",text1:"Search and select the question you wish to add, or ",text2:" create a new question, ",text3:"once created, you will find it within this list.",crear:"Assign",editar:"Save"},dashboardAuditorias:{ordenar_fecha:"Order by date",agrupar_areas:"Go to the Process view",mostrar_realizados:"Show already done",fecha_inicio:"Start date",fecha_expiracion:"Due date",fecha_creacion:"Creation date",area:"Area",proceso:"Process",auditor:"Auditor",vista:"View",auditorias:"Scheduled Audits"},detallesAuditoria:{auditor:"Auditor",descripcion:"Description",plan_reaccion:"Reaction plan",creada_por:"Created by",fecha_inicio:"Start date",fecha_finalizacion:"Due date",preguntas:"Questions (Tengo que poner los nombres de las preguntas)"},responderAuditoria:{responder_auditoria:"Answer audit",justificacion:"Justification",si:"Yes",no:"No",enviar:"Submit",scan_qr:"Scan the QR Code"},tarjetaAuditoria:{fecha_limite:"Due date",auditor:"Auditor",proceso:"Process",password:"Password",assignedBy:"Assigned by"}},auth:{changePassword:{cambiar_contrasena:"Change password",contrasena_actual:"Current password",contrasena_nueva:"New password",repite_contrasena:"Repeat new password",aceptar:"Accept",cancelar:"Cancel"},signIn:{correo:"E-mail",contrasena:"Password",iniciar_sesion:"Log In"},signUp:{registrar_auditor:"Register auditor",correo:"E-mail",contrasena:"Password",nombre:"First name",apellido:"Last name",capa:"Layer",registrar:"Register"}},layout:{navbar:{},signedInLinks:{},signedOutLinks:{}},preguntas:{crearPregunta:{crear_pregunta:"Create question",editar_pregunta:"Edit question",pregunta:"Question",descripcion:"Description",plan_reaccion:"Reaction plan",categoria:"Layer",crear:"Create",editar:"Save",fix:"Fix immediately",contramedidas_temporales:"Temporary countermeasures",parar_produccion:"Stop production"},dashboardPreguntas:{creacion_preguntas:"LPA Check Items"},detallesPregunta:{descripcion:"Purpose",categoria:"Layer",plan_reaccion:"Reaction plan",creado_por:"Created by",creado:"Created",ver_respuestas:"Answers"},detallesPreguntaIndividual:{},detallesPreguntasAuditoria:{respuestas_auditoria:"Audit answers"},preguntaGrafica:{},preguntas:{},tarjetaPregunta:{}},opciones:{opciones:"Settings",idioma:"Language",cambiar_contrasena:"Change password",registrar_auditor:"Register new auditor",preguntas:"Questions",procesos:"Processes",areas:"Areas"}}},z=t(532),H=t.n(z),X=i.a.forwardRef((function(e,a){return Object(m.jsx)(G.a,Object(N.a)({direction:"up",ref:a},e))})),q=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={open:!1},e.handleClickOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=g;Date.prototype.addDays=function(e){var a=new Date(this.valueOf());return a.setDate(a.getDate()+e),a};var t=this.props,r=t.auditoria,s=t.userLevel,n=t.alreadyDone,i=t.lang,c=t.users,o=t.areas,l=t.procesos;if(!i)return null;if(!c)return null;if(!o)return null;if(!l)return null;var u="white",d="",h=Object(x.a)(r.auditor).map((function(e){return c.find((function(a){return a.id===e}))})),j=o.find((function(e){return e.id===r.area})),O=l.find((function(e){return e.id===r.proceso}));if(j)switch(j.urgencia){case 0:u="#009900",d="R";break;case 1:u="#FFCC00",d="M";break;case 2:u="#FF9900",d="!";break;case 3:u="#C00000",d="!!"}var v={};n&&(u="grey",d="D",v={backgroundColor:"#D5D8DC"});var N=0===s?Object(m.jsx)("div",{className:"boton extra-margin-botones",children:Object(m.jsx)(p.b,{to:a.detalles_preguntas_auditoria+"/"+r.id,children:Object(m.jsx)(f.a,{icon:b.a})})}):Object(m.jsx)("div",{style:{backgroundColor:u,color:"white"},className:"suavizar-borde center-box",children:d}),C=0===s?Object(m.jsxs)("div",{className:"button-group",children:[N,Object(m.jsx)("div",{className:"boton extra-margin-botones",onClick:this.handleClickOpen,children:Object(m.jsx)(f.a,{icon:b.e})}),Object(m.jsx)(p.b,{to:a.crear_auditoria+"/"+r.id,children:Object(m.jsx)("div",{className:"boton extra-margin-botones",children:Object(m.jsx)(f.a,{icon:b.c})})}),Object(m.jsx)("div",{className:"boton extra-margin-botones",onClick:function(){F.a.fire({title:W[i].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[i].swal.cancel,confirmButtonText:W[i].swal.save}).then((function(a){a.isConfirmed?(e.props.deleteAuditoria(r.id),F.a.fire(W[i].swal.saved,"","success")):a.isDenied&&F.a.fire(W[i].swal.not_saved,"","info")}))},children:Object(m.jsx)(f.a,{icon:b.g})})]}):N;y.a.locale(W[i].locale);var w=r.fecha_fin?Object(m.jsxs)("p",{className:"grey-text",children:[W[i].auditorias.tarjetaAuditoria.fecha_limite,":"," ",y()(r.fecha_fin.toDate()).fromNow()]}):null,S=Object(m.jsxs)("div",{className:"",children:[Object(m.jsx)("div",{className:"",children:Object(m.jsx)("span",{className:"",children:r.auditoria.length>18?r.auditoria.substr(0,18)+"...":r.auditoria})}),0===s?Object(m.jsxs)("div",{children:[W[i].auditorias.tarjetaAuditoria.auditor,": ",h&&h.map((function(e){return e?e.firstName[0]+". "+e.lastName:""})).join(" & ")]}):null,0!==s?j&&O?O.proceso+", "+j.area:null:Object(m.jsx)("p",{children:j&&O?O.proceso+", "+j.area:null}),w,0!==s?Object(m.jsxs)("p",{children:[W[i].auditorias.tarjetaAuditoria.assignedBy,": ",r.createdBy,", ",y()(r.createdAt.toDate()).fromNow()]}):null]}),A=Object(m.jsxs)(B.a,{open:this.state.open,TransitionComponent:X,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(m.jsx)(K.a,{className:"center-box",children:Object(m.jsx)(H.a,{value:r.password})}),Object(m.jsx)(U.a,{children:Object(m.jsx)(L.a,{onClick:this.handleClose,color:"primary",children:W[i].aceptar})})]});return 0===s?Object(m.jsxs)("div",{style:v,className:"tarjeta-auditor\xeda",children:[Object(m.jsx)("div",{className:"tarjeta-auditor\xeda-half1",children:S}),Object(m.jsx)("div",{className:"tarjeta-auditor\xeda-half2",children:C}),A]}):Object(m.jsxs)(p.b,{className:"tarjeta-auditor\xeda",style:v,to:a.responder_auditoria+"/"+r.id,children:[Object(m.jsx)("div",{className:"tarjeta-auditor\xeda-half1",children:S}),Object(m.jsx)("div",{className:"tarjeta-auditor\xeda-half2",children:C}),A]})}}]),t}(n.Component),J=Object(T.d)(Object(j.b)((function(e){return{lang:e.firebase.profile.lang,areas:e.firestore.ordered.areas,procesos:e.firestore.ordered.procesos}}),(function(e){return{deleteAuditoria:function(a){return e(function(e){return function(a,t,r){r.getFirebase,(0,r.getFirestore)().collection("auditorias").doc(e).delete()}}(a))},editAuditoria:function(a,t){return e(E(a,t))}}})),Object(I.firestoreConnect)([{collection:"areas"},{collection:"procesos"}]))(q),V=function(e){var a=e.where,t=e.hasTrace,r=a||"/crear-auditoria";return t&&(r="/crear-auditoria-props/"+t.proceso+"/"+t.area),Object(m.jsx)(p.b,{to:r,className:"tarjeta-auditor\xeda center-box",children:Object(m.jsx)("div",{className:"add-symbol",children:Object(m.jsx)(f.a,{size:"5x",icon:b.d})})})};function Y(e){var a=e.userLevel,t=e.auditorias,r=e.alreadyDone,s=e.lang,n=e.uid,i=e.users,c=e.hasTrace,o=0!==a?t.filter((function(e){return e.auditor.includes(n)})):t;return Object(m.jsx)("div",{children:o&&0!==o.length||0===a?Object(m.jsxs)("div",{className:"arroz-chino",children:[0===a?Object(m.jsx)(V,{hasTrace:c}):null,o&&o.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsx)(J,{auditoria:e,userLevel:a,alreadyDone:r,lang:s,users:i})},e.id)}))]}):Object(m.jsx)("div",{className:"footer-single",children:Object(m.jsx)("p",{children:W[s].auditorias.auditorias.nada})})})}var M=t(1037),Z=t(1045),$=t(1030),ee=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).move=function(){e.props.where?e.props.history.push(e.props.where):e.props.history.push("/")},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props.lang;return a?Object(m.jsx)("button",{className:"return",onClick:function(){e.move()},children:W[a].return}):null}}]),t}(n.Component),ae=Object(j.b)((function(e){return{lang:e.firebase.profile.lang}}))(Object(v.g)(ee)),te=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={filter:0},e.handleChangeSelect=function(a){e.setState({filter:a.target.value})},e.getKeyByValue=function(e,a){return Object.keys(e).find((function(t){return e[t]===a}))},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this;console.log("This app was developed by this guy: https://github.com/pbldmngz"),console.log("For any further changes, please send an e-mail to pablo@dominguez.contact");var a=this.props,t=a.auditorias,r=a.respuestas,s=a.auth,n=a.userLevel,i=a.lang,c=a.users;if(!s.uid)return Object(m.jsx)(v.a,{to:"/signin"});if(!i)return null;var o=new Date,l=t?0===n?Object(x.a)(t):Object(x.a)(t).filter((function(e){return e.fecha_fin.toDate()>o})):[];this.props.match.params.proceso&&" "!==this.props.match.params.proceso&&(l=l.filter((function(a){return a.proceso===e.props.match.params.proceso}))),this.props.match.params.area&&(l=l.filter((function(a){return a.area===e.props.match.params.area})));var u,d=l?Object(x.a)(l):[],h="fecha_fin";switch(this.state.filter){case 0:h="fecha_fin";break;case 1:this.props.history.push("/procesos");break;case 3:h="createdAt";break;case 4:h="area";break;case 5:h="proceso";break;case 6:h="auditor";break;case 7:h="fecha_inicio";break;default:h="fecha_fin"}u=h;var p=d=d.sort((function(e,a){var t=e[u].toString(),r=a[u].toString();return t<r?-1:t>r?1:0}));if(3===this.state.filter&&(p=p.reverse()),t&&0!==n&&r){var j=r.filter((function(e){return s.uid===e.answeredById})),b={};for(var f in j)b[j[f].auditoria]=!0;var g=Object.keys(b);p=2===this.state.filter?d&&d.filter((function(e){return g.includes(e.id)})):d&&d.filter((function(e){return!g.includes(e.id)}))}var O=0===n?Object(m.jsxs)(M.a,{labelId:"select-filter",id:"filter",value:this.state.filter,onChange:this.handleChangeSelect,children:[Object(m.jsx)(Z.a,{value:7,children:W[i].auditorias.dashboardAuditorias.fecha_inicio}),Object(m.jsx)(Z.a,{value:0,children:W[i].auditorias.dashboardAuditorias.fecha_expiracion}),Object(m.jsx)(Z.a,{value:3,children:W[i].auditorias.dashboardAuditorias.fecha_creacion}),Object(m.jsx)(Z.a,{value:4,children:W[i].auditorias.dashboardAuditorias.area}),Object(m.jsx)(Z.a,{value:5,children:W[i].auditorias.dashboardAuditorias.proceso}),Object(m.jsx)(Z.a,{value:6,children:W[i].auditorias.dashboardAuditorias.auditor}),Object(m.jsx)(Z.a,{value:1,children:W[i].auditorias.dashboardAuditorias.agrupar_areas})]}):Object(m.jsxs)(M.a,{labelId:"select-filter",id:"filter",value:this.state.filter,onChange:this.handleChangeSelect,children:[Object(m.jsx)(Z.a,{value:0,children:W[i].auditorias.dashboardAuditorias.ordenar_fecha}),Object(m.jsx)(Z.a,{value:2,children:W[i].auditorias.dashboardAuditorias.mostrar_realizados})]}),N=this.props.match.params.proceso?"/areas/"+this.props.match.params.proceso:"/";return p?Object(m.jsxs)("div",{className:"padre-padre-titulo",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:this.props.match.params.proceso?Object(m.jsx)(ae,{where:N}):null}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[i].auditorias.dashboardAuditorias.auditorias})}),Object(m.jsxs)("div",{className:"titulo",children:[Object(m.jsx)($.a,{id:"select-filter",children:W[i].auditorias.dashboardAuditorias.vista}),O]})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(Y,{auditorias:p,userLevel:n,alreadyDone:2===this.state.filter,lang:i,uid:s.uid,users:c,hasTrace:this.props.match.params.proceso?this.props.match.params:null})})]}):Object(m.jsx)("div",{className:"container center",children:Object(m.jsx)("p",{children:W[i].cargando})})}}]),t}(n.Component),re=Object(T.d)(Object(j.b)((function(e){return{auditorias:e.firestore.ordered.auditorias,respuestas:e.firestore.ordered.respuestas,users:e.firestore.ordered.users,lang:e.firebase.profile.lang,auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel}})),Object(I.firestoreConnect)([{collection:"auditorias",orderBy:["fecha_fin","asc"]},{collection:"respuestas"},{collection:"users"}]))(te),se=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={email:"",password:""},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleSubmit=function(a){a.preventDefault(),e.props.signIn(e.state)},e.listenEnter=function(a){13===a.keyCode&&e.handleSubmit(a)},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.authError,r=a.auth;console.log("This app was developed by this guy: https://github.com/pbldmngz"),console.log("For any further changes, please send an e-mail to pablo@dominguez.contact");var s="spanish";return r.uid?Object(m.jsx)(v.a,{to:"/"}):Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo",children:[Object(m.jsx)("div",{className:"titulo"}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("img",{className:"logo",src:"data:image/png;base64,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",alt:"gst logo"})})]}),Object(m.jsx)("form",{className:"",onSubmit:this.handleSubmit,children:Object(m.jsxs)("div",{className:"form-1 white",children:[Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsxs)("div",{className:"input-field",children:[Object(m.jsx)("label",{className:"uname",htmlFor:"email"}),Object(m.jsx)("input",{onKeyDown:function(a){return e.listenEnter(a)},type:"email",id:"email",placeholder:W[s].auth.signIn.correo,onChange:this.handleChange})]}),Object(m.jsxs)("div",{className:"input-field",children:[Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{onKeyDown:function(a){return e.listenEnter(a)},type:"password",id:"password",placeholder:W[s].auth.signIn.contrasena,onChange:this.handleChange})]})]}),Object(m.jsx)("div",{className:"footer-single",children:t?Object(m.jsx)("p",{children:t}):null}),Object(m.jsx)("div",{className:"footer-single",children:Object(m.jsx)("button",{className:"add-question",children:W[s].auth.signIn.iniciar_sesion})})]})})]})}}]),t}(n.Component),ne=Object(j.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(a){return e((t=a,function(e,a,r){(0,r.getFirebase)().auth().signInWithEmailAndPassword(t.email,t.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(a){e({type:"LOGIN_ERROR",err:a})}))}));var t}}}))(se),ie=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={email:"",password:"",firstName:"",lastName:"",level:4,lang:"english"},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeSelect=function(a){e.setState({level:a.target.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.signUp(e.state),e.props.history.push("/profile")},e.Seguro=function(a){a.preventDefault(),F.a.fire({title:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Save",denyButtonText:"Don't save"}).then((function(t){t.isConfirmed?(e.handleSubmit(a),F.a.fire("Saved!","","success")):t.isDenied&&F.a.fire("Changes are not saved","","info")}))},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props,a=e.auth,t=e.authError,r=e.lang,s=e.userLevel;return a.uid?s&&0!==s?Object(m.jsx)(v.a,{to:"/"}):r?Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/profile"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"titulo",children:W[r].auth.signUp.registrar_auditor})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"form-2",children:Object(m.jsxs)("form",{className:"",onSubmit:this.Seguro,children:[Object(m.jsxs)("div",{className:"date-container",children:[Object(m.jsxs)("div",{className:"input-field-1-2",children:[Object(m.jsx)("label",{htmlFor:"firstName"}),Object(m.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"text",id:"firstName",placeholder:W[r].auth.signUp.nombre,onChange:this.handleChange})]}),Object(m.jsxs)("div",{className:"input-field-3-4",children:[Object(m.jsx)("label",{htmlFor:"lastName"}),Object(m.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"text",id:"lastName",placeholder:W[r].auth.signUp.apellido,onChange:this.handleChange})]})]}),Object(m.jsxs)("div",{className:"input-field",children:[Object(m.jsx)("label",{htmlFor:"email"}),Object(m.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"email",id:"email",placeholder:W[r].auth.signUp.correo,onChange:this.handleChange})]}),Object(m.jsxs)("div",{className:"input-field",children:[Object(m.jsx)("label",{htmlFor:"password"}),Object(m.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"text",id:"password",placeholder:W[r].auth.signUp.contrasena,onChange:this.handleChange})]}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsxs)("div",{className:"footer-single-flex",children:[Object(m.jsx)($.a,{id:"select-level",children:W[r].auth.signUp.capa}),Object(m.jsxs)(M.a,{labelId:"select-level",id:"level",value:this.state.level,onChange:this.handleChangeSelect,style:{width:"".concat(100,"px")},children:[Object(m.jsx)(Z.a,{value:4,children:"A"}),Object(m.jsx)(Z.a,{value:3,children:"B"}),Object(m.jsx)(Z.a,{value:2,children:"C"}),Object(m.jsx)(Z.a,{value:1,children:"D"}),Object(m.jsx)(Z.a,{value:0,children:"Admin"})]})]})})]})})}),Object(m.jsx)("div",{className:"footer-single margin-top",children:Object(m.jsx)("button",{onClick:this.Seguro,className:"add-question",children:W[r].auth.signUp.registrar})}),Object(m.jsx)("div",{className:"footer-single",children:t?Object(m.jsx)("p",{children:t}):null})]}):null:Object(m.jsx)(v.a,{to:"/"})}}]),t}(n.Component),ce=Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,authError:e.auth.authError,lang:e.firebase.profile.lang}}),(function(e){return{signUp:function(a){return e(function(e){return function(a,t,r){var s=r.getFirebase,n=(r.getFirestore,s()),i=t().firebase.profile;n.functions().httpsCallable("createUser")({newUser:e,userLevel:i.userLevel}).then((function(e){console.log("Creado nuevo usuario")}))}}(a))}}}))(ie),oe=t(330),le=t.n(oe),ue=(t(290),function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return Object(m.jsx)("input",Object(N.a)(Object(N.a)({type:"text"},this.props),{},{readOnly:!0}))}}]),t}(n.Component)),de=function(e){Object(d.a)(r,e);var a=Object(h.a)(r);function r(){var e;Object(l.a)(this,r);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={auditoria:"",auditor:["","","",""],area:"",proceso:"",fecha_inicio:new Date,fecha_fin:new Date,preguntas:[],openB:!1,valueB:"",password:""},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeAutocomplete=function(a,t){e.setState({valueB:t})},e.handleSubmit=function(a){a.preventDefault();var r=e.props.match.params.id,s={auditoria:e.state.auditoria,auditor:e.state.auditor.filter((function(e){return""!==e})),area:e.state.area,proceso:e.state.proceso,fecha_inicio:e.state.fecha_inicio,fecha_fin:e.state.fecha_fin,preguntas:e.props.procesos.find((function(a){return a.id===e.state.proceso})).preguntas};if(r)s.password=e.state.password,e.props.editAuditoria(r,s);else{var n=t(729).generate({length:8,numbers:!0,uppercase:!1,lowercase:!1});s.password=n,e.props.createAuditoria(s)}var i=e.props.match.params.proceso?"/auditorias/"+e.props.match.params.proceso+"/"+e.props.match.params.area:"/";e.props.history.push(i)},e.handleClickOpen=function(){e.setState({openB:!0})},e.handleCancel=function(){var a=e.props.match.params.proceso?"/auditorias/"+e.props.match.params.proceso+"/"+e.props.match.params.area:"/";e.props.history.push(a)},e.handleDelete=function(a){var t=e.state.preguntas.filter((function(e){return e.id!==a}));e.setState({preguntas:t})},e.handleClose=function(){e.setState({openB:!1})},e.handleCloseSave=function(a){e.setState((function(a){return{openB:!1,preguntas:Object(x.a)(new Set([].concat(Object(x.a)(a.preguntas),[e.state.valueB])))}}))},e.Seguro=function(a){var t=e.props.lang;a.preventDefault(),F.a.fire({title:W[t].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[t].swal.cancel,confirmButtonText:W[t].swal.save}).then((function(r){r.isConfirmed?(e.handleSubmit(a),F.a.fire(W[t].swal.saved,"","success")):r.isDenied&&F.a.fire(W[t].swal.not_saved,"","info")}))},e.handleChangeSelectProceso=function(a){e.setState({proceso:a.target.value})},e.handleChangeSelectArea=function(a){e.setState({area:a.target.value})},e.handleChangeSelectAuditor=function(a){console.log("This is E",a.target);var t=Object(x.a)(e.state.auditor);switch(a.target.name){case"auditor1":t[0]=a.target.value;break;case"auditor2":t[1]=a.target.value;break;case"auditor3":t[2]=a.target.value;break;case"auditor4":t[3]=a.target.value}e.setState({auditor:t})},e.sortByKey=function(e,a){return e.sort((function(e,t){var r=e[a].toString(),s=t[a].toString();return r<s?-1:r>s?1:0}))},e.cantSend=function(){return!(e.state.preguntas&&e.state.preguntas.length>=5&&e.state.preguntas.length<=15)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.proceso&&" "!==this.props.match.params.proceso?this.setState({proceso:this.props.match.params.proceso,area:this.props.match.params.area}):this.props.match.params.area&&this.setState({area:this.props.match.params.area});var a=this.props.match.params.id;a&&this.props.getAuditoria(a).then((function(a){e.setState({auditoria:a.auditoria,auditor:a.auditor,area:a.area,proceso:a.proceso,fecha_inicio:a.fecha_inicio.toDate(),fecha_fin:a.fecha_fin.toDate(),preguntas:a.preguntas.map((function(a){return e.props.preguntas.filter((function(e){return e.id===a}))[0]})),password:a.password})}))}},{key:"render",value:function(){var e=this,a=this.props,t=a.auth,r=a.userLevel,s=a.lang,n=a.procesos,i=a.areas,c=a.users;if(!t.uid)return Object(m.jsx)(v.a,{to:"/signin"});if(!s)return null;if(0!==r)return Object(m.jsx)(v.a,{to:"/"});if(!c)return null;var o=this.sortByKey(Object(x.a)(c),"lastName").filter((function(e){return 0!==e.userLevel})),l=Object(x.a)(i).find((function(a){return a.id===e.state.area})),u=""!==this.state.area&&i&&Object(x.a)(i).map((function(e){return e.id})).includes(this.state.area)&&l?l.urgencia:0;switch(u){case 0:u=[3,4];break;case 1:u=[2,3,4];break;case 2:case 3:u=[1,2,3,4];break;default:u=[3,4]}var d=["Admin","D","C","B","A"],h=this.props.match.params.proceso?"/auditorias/"+this.props.match.params.proceso+"/"+this.props.match.params.area:"/";return Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:h})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"",children:W[s].auditorias.crearAuditoria.crear_auditoria})})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.Seguro,children:Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"proceso",value:this.state.proceso,onChange:this.handleChangeSelectProceso,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[s].auditorias.crearAuditoria.proceso})}),n&&this.sortByKey(Object(x.a)(n),"proceso").map((function(e){return Object(m.jsx)(Z.a,{className:"text-color",value:e.id,children:e.proceso},e.id)}))]})}),Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"area",value:this.state.area?this.state.area:"",onChange:this.handleChangeSelectArea,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,disabled:""===this.state.proceso,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[s].auditorias.crearAuditoria.area})}),i&&this.sortByKey(Object(x.a)(i),"area").filter((function(a){return a.proceso===e.state.proceso})).map((function(e){return Object(m.jsx)(Z.a,{className:"text-color",value:e.id,children:e.area},e.id)}))]})}),console.log(u),""!==this.state.area?u&&u.map((function(a){return Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",name:"auditor"+a.toString(),value:e.state.auditor[a-1]?e.state.auditor[a-1]:"",onChange:e.handleChangeSelectAuditor,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsxs)("div",{className:"placeholder-color",children:[W[s].auditorias.crearAuditoria.auditor," - ",d[a]]})}),o&&o.filter((function(e){return e.userLevel===a})).map((function(e){return Object(m.jsxs)(Z.a,{className:"text-color",value:e.id,children:[e.lastName,", ",e.firstName]},e.id)}))]})},a)})):null,Object(m.jsxs)("div",{className:"date-container",children:[Object(m.jsx)("span",{className:"fecha",children:W[s].auditorias.crearAuditoria.inicia_el}),Object(m.jsx)("div",{className:"datePicker-container",children:Object(m.jsx)(le.a,{id:"fecha_inicio",selected:this.state.fecha_inicio,onChange:function(a){return e.setState({fecha_inicio:a})},withPortal:!0,customInput:Object(m.jsx)(ue,{})})}),Object(m.jsx)("span",{className:"fecha",children:W[s].auditorias.crearAuditoria.termina_el}),Object(m.jsx)("div",{className:"datePicker-container",children:Object(m.jsx)(le.a,{id:"fecha_fin",selected:this.state.fecha_fin,onChange:function(a){return e.setState({fecha_fin:a})},withPortal:!0,customInput:Object(m.jsx)(ue,{})})})]})]})})})})}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"cancelar",onClick:this.handleCancel,children:W[s].auditorias.crearAuditoria.cancelar})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.Seguro,children:W[s].auditorias.crearAuditoria.crear})})]})})]})}}]),r}(n.Component),he=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang,preguntas:e.firestore.ordered.preguntas,areas:e.firestore.ordered.areas,procesos:e.firestore.ordered.procesos,users:e.firestore.ordered.users}}),(function(e){return{createAuditoria:function(a){return e(_(a))},editAuditoria:function(a,t){return e(E(a,t))},getAuditoria:function(a){return e(D(a))}}})),Object(I.firestoreConnect)([{collection:"preguntas"},{collection:"areas"},{collection:"procesos"},{collection:"users"}]))(de),pe=t(53),je=t(156),be=t.n(je),fe=t(1032),ge=t(1031),me=i.a.forwardRef((function(e,a){return Object(m.jsx)(G.a,Object(N.a)({direction:"up",ref:a},e))}));function Oe(e){var a=g,t=e.pregunta,r=e.userLevel,s=e.lang,n=0===r?Object(m.jsxs)("div",{className:"button-group",children:[Object(m.jsx)(p.b,{to:a.editar_pregunta+"/"+t.id,children:Object(m.jsx)("div",{className:"boton",children:Object(m.jsx)(f.a,{icon:b.c})})}),Object(m.jsx)(p.b,{to:a.preguntas,children:Object(m.jsx)("div",{className:"boton",onClick:function(){F.a.fire({title:"Do you want to save the changes?",showDenyButton:!0,showConfirmButton:!0,denyButtonText:"Don't save",confirmButtonText:"Save"}).then((function(a){a.isConfirmed?(e.deletePregunta(t.id),F.a.fire("Saved!","","success")):a.isDenied&&F.a.fire("Changes are not saved","","info")}))},children:Object(m.jsx)(f.a,{icon:b.g})})})]}):null,c={0:W[s].preguntas.crearPregunta.fix,1:W[s].preguntas.crearPregunta.contramedidas_temporales,2:W[s].preguntas.crearPregunta.parar_produccion},o=i.a.useState(!1),l=Object(pe.a)(o,2),u=l[0],d=l[1],h=function(){d(!1)};return Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"tarjeta-pregunta",children:[Object(m.jsxs)("div",{className:"tarjeta-pregunta-half1 hover-cursor",onClick:function(){d(!0)},children:[Object(m.jsx)("span",{className:"",children:t[s].length>60?t[s].substr(0,60)+"...":t[s]}),Object(m.jsx)("p",{className:"",children:t.description.length>120?t.description.substr(0,120)+"...":t.description}),Object(m.jsx)("p",{className:"",children:c[t.reaction_plan]})]}),Object(m.jsx)("div",{className:"tarjeta-pregunta-half2",children:Object(m.jsx)("div",{className:"center-box",children:n})})]},t.id),Object(m.jsxs)(B.a,{open:u,TransitionComponent:me,onClose:h,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(m.jsx)(ge.a,{id:"alert-dialog-slide-title",children:"Justificaciones a esta pregunta####"}),Object(m.jsxs)(fe.a,{className:"dialog-content",children:[Object(m.jsxs)(fe.a,{children:[t.english,"###"]}),Object(m.jsxs)(fe.a,{children:[Object(m.jsx)("span",{className:"dialog-span",children:"Descripci\xf3n:"}),Object(m.jsxs)("p",{className:"dialog-p",children:[t.description,"###EEEEEEEEEEEEEEEEEEEEEEE##########"]})]}),Object(m.jsxs)(fe.a,{children:[Object(m.jsx)("span",{className:"dialog-span",children:"Capa:"}),Object(m.jsx)("p",{className:"dialog-p",children:{1:"A",2:"B",3:"C",4:"D"}[t.category]})]}),Object(m.jsxs)(fe.a,{children:[Object(m.jsx)("span",{className:"dialog-span",children:"Plan de reacci\xf3n:"}),Object(m.jsx)("p",{className:"dialog-p",children:t.reaction_plan})]}),Object(m.jsxs)(fe.a,{children:[Object(m.jsx)("span",{className:"dialog-span",children:"Creado por:"}),Object(m.jsx)("p",{className:"dialog-p",children:t.createdBy})]}),Object(m.jsxs)(fe.a,{children:[Object(m.jsx)("span",{className:"dialog-span",children:"Creado:"}),Object(m.jsx)("p",{className:"dialog-p",children:be()(t.createdAt.toDate()).fromNow()})]})]}),Object(m.jsx)(U.a,{children:Object(m.jsx)(L.a,{onClick:h,color:"primary",children:"Aceptar###"})})]})]})}var ve=function(){return Object(m.jsx)(p.b,{to:"/crear-pregunta",className:"tarjeta-pregunta center-box",children:Object(m.jsx)("div",{className:"add-symbol",children:Object(m.jsx)(f.a,{size:"5x",icon:b.d})})})};function xe(e){var a,t,r=e.preguntas,s=e.editPregunta,n=e.deletePregunta,i=e.userLevel,c=e.lang,o=(a=Object(x.a)(r),t="createdAt",a.sort((function(e,a){var r=e[t].toString(),s=a[t].toString();return r<s?-1:r>s?1:0})));return Object(m.jsx)("div",{className:"",children:Object(m.jsxs)("div",{className:"preguntas",children:[Object(m.jsx)(ve,{}),r&&o.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsx)(Oe,{pregunta:e,editPregunta:s,deletePregunta:n,userLevel:i,lang:c})},e.id)}))]})})}var Ne=t(68),Ce=function(e,a){return function(t,r,s){s.getFirebase;var n=(0,s.getFirestore)(),i=r().firebase.profile,c=r().firebase.auth.uid;n.collection("preguntas").doc(e).update(Object(N.a)(Object(N.a)({},a),{},{updatedAt:new Date,updatedBy:i.firstName+" "+i.lastName,editorId:c})).then((function(){t({type:"EDIT_PREGUNTA"},a)})).catch((function(e){t({type:"EDIT_PREGUNTA_ERROR"},e)}))}},ye=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props,a=e.preguntas,t=e.auth,r=e.userLevel,s=e.lang;return t.uid?0!==r?Object(m.jsx)(v.a,{to:"/"}):s?a?Object(m.jsxs)("div",{className:"padre-padre-titulo",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/profile"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[s].preguntas.dashboardPreguntas.creacion_preguntas})})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(xe,{preguntas:a,editPregunta:this.props.editPregunta,deletePregunta:this.props.deletePregunta,userLevel:r,lang:s})})]}):Object(m.jsx)("div",{className:"container center",children:Object(m.jsx)("p",{children:"Cargando..."})}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),we=Object(T.d)(Object(j.b)((function(e){return{preguntas:e.firestore.ordered.preguntas,auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang}}),(function(e){return{deletePregunta:function(a){return e(function(e){return function(a,t,r){r.getFirebase;var s=(0,r.getFirestore)();t().firebase.profile,t().firebase.auth.uid,s.collection("preguntas").doc(e).delete()}}(a))},editPregunta:function(a){return e(Ce(a))}}})),Object(I.firestoreConnect)([{collection:"preguntas",orderBy:["createdAt","desc"]}]))(ye),Se=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={category:4,description:"",reaction_plan:"",english:"",spanish:""},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeSelect=function(a){e.setState({category:a.target.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.createPregunta(e.state),e.props.history.push("/preguntas")},e.Seguro=function(a){var t=e.props.lang;a.preventDefault(),F.a.fire({title:W[t].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[t].swal.cancel,confirmButtonText:W[t].swal.save}).then((function(r){r.isConfirmed?(e.handleSubmit(a),F.a.fire(W[t].swal.saved,"","success")):r.isDenied&&F.a.fire(W[t].swal.not_saved,"","info")}))},e.handleChangeSelectRP=function(a){e.setState({reaction_plan:a.target.value})},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props,a=e.auth,t=e.lang;return a.uid?t?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/preguntas"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"titulo",children:W[t].preguntas.crearPregunta.crear_pregunta})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.Seguro,children:Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"english",placeholder:W[t].preguntas.crearPregunta.crear_pregunta+" [EN]",onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"spanish",placeholder:W[t].preguntas.crearPregunta.crear_pregunta+" [ES]",onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"description",placeholder:W[t].preguntas.crearPregunta.descripcion,onChange:this.handleChange})}),Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"reaction_plan",value:this.state.reaction_plan,onChange:this.handleChangeSelectRP,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[t].preguntas.crearPregunta.plan_reaccion})}),Object(m.jsx)(Z.a,{value:0,children:W[t].preguntas.crearPregunta.fix}),Object(m.jsx)(Z.a,{value:1,children:W[t].preguntas.crearPregunta.contramedidas_temporales}),Object(m.jsx)(Z.a,{value:2,children:W[t].preguntas.crearPregunta.parar_produccion})]})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsxs)("div",{className:"footer-single-flex",children:[Object(m.jsx)($.a,{id:"select-level",children:W[t].preguntas.crearPregunta.categoria}),Object(m.jsxs)(M.a,{labelId:"select-level",id:"level",value:this.state.category,onChange:this.handleChangeSelect,style:{width:"".concat(100,"px")},children:[Object(m.jsx)(Z.a,{value:4,children:"A"}),Object(m.jsx)(Z.a,{value:3,children:"B"}),Object(m.jsx)(Z.a,{value:2,children:"C"}),Object(m.jsx)(Z.a,{value:1,children:"D"})]})]})})]})})})}),Object(m.jsx)("div",{className:"footer-single",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.Seguro,children:W[t].preguntas.crearPregunta.crear})})]}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),Ae=Object(j.b)((function(e){return{auth:e.firebase.auth,lang:e.firebase.profile.lang}}),(function(e){return{createPregunta:function(a){return e(function(e){return function(a,t,r){r.getFirebase;var s=(0,r.getFirestore)(),n=t().firebase.profile,i=t().firebase.auth.uid;s.collection("preguntas").add(Object(N.a)(Object(N.a)({},e),{},{createdBy:n.firstName+" "+n.lastName,authorId:i,createdAt:new Date})).then((function(){a({type:"CREATE_PREGUNTA"},e)})).catch((function(e){a({type:"CREATE_PREGUNTA_ERROR"},e)}))}}(a))}}}))(Se),_e=t(541),Ee=function(e){var a=e.radius,t=e.innerText,r=e.colors,s=e.data;console.log("ThisIsData:",s);var n=a||0,i=function(e){return"".concat(Math.round(e/function(){var e,a=0,t=Object(Ne.a)(s);try{for(t.s();!(e=t.n()).done;)a+=e.value.value}catch(r){t.e(r)}finally{t.f()}return a}()*100),"%")};return Object(m.jsx)("div",{style:{height:"100%"},children:Object(m.jsx)(_e.a,{data:s,keys:["label"],colors:r?function(e){return r[e.id]}:["#002D73","#A9CCE3"],arcLabelsTextColor:"white",innerRadius:n,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:2,margin:{top:15,right:15,bottom:15,left:15},layers:["arcs","arcLabels","arcLinkLabels","legends",t?function(e){var a=e.centerX,r=e.centerY;return Object(m.jsx)("text",{x:a,y:r,textAnchor:"middle",dominantBaseline:"central",style:{fontSize:"28px",fontWeight:"600"},children:t})}:null],enableArcLabels:!1,arcLabel:function(e){return"".concat(i(e.value))},enableArcLinkLabels:!1})})},Pe=i.a.forwardRef((function(e,a){return Object(m.jsx)(G.a,Object(N.a)({direction:"up",ref:a},e))})),Re=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,lang:e.firebase.profile.lang}})),Object(I.firestoreConnect)([{collection:"preguntas"}]))((function(e){var a=e.pregunta,t=e.lang,r=i.a.useState(!1),s=Object(pe.a)(r,2),n=s[0],c=s[1],o=function(){c(!1)},l={yes:0,no:0};a.respuestas.forEach((function(e){"S\xed"===e.respuesta?l.yes+=1:"No"===e.respuesta&&(l.no+=1)}));var u=(l=[{id:"no",label:"no",value:l.no},{id:"yes",label:"yes",value:l.yes}])[0].value+l[1].value!==0?Math.round(l[0].value/(l[0].value+l[1].value)*100):0;console.log("---\x3e",l);var d=a.respuestas.map((function(e){return Object(m.jsx)(fe.a,{children:e.justificacion})})),h=t?[W[t].preguntas.crearPregunta.fix,W[t].preguntas.crearPregunta.contramedidas_temporales,W[t].preguntas.crearPregunta.parar_produccion]:["###","###","###"];return a.createdAt?Object(m.jsxs)("div",{className:"new-class",children:[Object(m.jsx)("div",{className:"tarjeta-pregunta",children:Object(m.jsxs)("div",{className:"arroz-chino only2row",children:[Object(m.jsxs)("div",{className:"new-class new-class-2",children:[Object(m.jsx)("p",{className:"card-title",children:Object(m.jsx)("b",{children:a[t]})}),Object(m.jsxs)("p",{className:"card-title justify-text ",children:[Object(m.jsxs)("b",{children:[W[t].preguntas.detallesPregunta.descripcion,": "]}),a.description]}),Object(m.jsxs)("p",{className:"card-title",children:[Object(m.jsxs)("b",{children:[W[t].preguntas.detallesPregunta.categoria,": "]}),{1:"A",2:"B",3:"C",4:"D"}[a.category]]}),Object(m.jsxs)("p",{className:"card-title",children:[Object(m.jsxs)("b",{children:[W[t].preguntas.detallesPregunta.plan_reaccion,": "]}),h[a.reaction_plan]]})]}),Object(m.jsxs)("div",{className:"new-parent",children:[Object(m.jsx)("div",{className:"graph-align",children:Object(m.jsx)(Ee,{data:l||[],radius:.5,innerText:u+"%"})}),Object(m.jsx)("div",{className:"new-class-3",children:Object(m.jsx)("button",{className:"aceptar responder",onClick:function(){c(!0)},children:W[t].preguntas.detallesPregunta.ver_respuestas})})]})]})}),Object(m.jsxs)(B.a,{open:n,TransitionComponent:Pe,onClose:o,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(m.jsx)(ge.a,{id:"alert-dialog-slide-title",children:"Justificaciones a esta pregunta"}),Object(m.jsx)(K.a,{children:d}),Object(m.jsx)(U.a,{children:Object(m.jsx)(L.a,{onClick:o,color:"primary",children:"Aceptar"})})]})]}):Object(m.jsx)("div",{className:"container center",children:Object(m.jsx)("p",{children:"Cargando..."})})})),De=Object(T.d)(Object(j.b)((function(e,a){var t=a.match.params.id,r=e.firestore.data.auditorias;return{auditoria:r?r[t]:null,lang:e.firebase.profile.lang,auth:e.firebase.auth}})),Object(I.firestoreConnect)([{collection:"auditorias"}]))((function(e){var a=e.auditoria,t=e.auth,r=e.lang;return r?t.uid?a?Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"section",children:Object(m.jsx)("div",{className:"card x-depth-0",children:Object(m.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(m.jsx)("span",{className:"card-title",children:a.auditoria}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.auditor,": ",a.auditor]}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.descripcion,": ",a.description]}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.plan_reaccion,": ",a.reaction_plan]}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.creada_por,": ",a.createdBy,", ",be()(a.createdAt.toDate()).locale(W[r].locale).fromNow()]}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.fecha_inicio,": ",be()(a.fecha_inicio.toDate()).locale(W[r].locale).fromNow()]}),Object(m.jsxs)("p",{children:[W[r].auditorias.detallesAuditoria.fecha_finalizacion,": ",be()(a.fecha_fin.toDate()).locale(W[r].locale).fromNow()]}),Object(m.jsx)("p",{children:W[r].auditorias.detallesAuditoria.preguntas})]})},a.id)})}):Object(m.jsxs)("div",{className:"container center",children:[console.log("cargando",W,r),W[r]?Object(m.jsx)("p",{children:W[r].cargando}):null]}):Object(m.jsx)(v.a,{to:"/signin"}):null})),ke=t(146),Fe=t(1035),Te=t(947),Ie=t(1040),Le=t(1046),Be=t(1044),Ue=t(535),Ke=t.n(Ue),Ge=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){r.setState(Object(Q.a)({},e.target.name,e.target.value))},r.handleSubmit=function(e){e.preventDefault();for(var a=Object.keys(r.state),t=["just-","resp-"],s={},n=0,i=a;n<i.length;n++){var c=i[n].substring(5,25);20===c.length&&(s[c]=!0)}s=Object.keys(s);var o,l=[],u=Object(Ne.a)(s);try{for(u.s();!(o=u.n()).done;){var d=o.value,h={pregunta:d,auditoria:r.props.match.params.id,area:r.state.area};h.auditoria_pregunta=r.props.match.params.id+"_"+d;var p,j=Object(Ne.a)(a);try{for(j.s();!(p=j.n()).done;){var b=p.value,f=b.substring(0,5),g=b.substring(5,25);t.includes(f)&&g===d&&("just-"===f?h.justificacion=r.state[b]:h.respuesta=r.state[b])}}catch(m){j.e(m)}finally{j.f()}l.push(h)}}catch(m){u.e(m)}finally{u.f()}r.props.respuestaPregunta(l),r.props.history.push("/")},r.Seguro=function(e){var a=r.props.lang;e.preventDefault(),F.a.fire({title:W[a].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[a].swal.cancel,confirmButtonText:W[a].swal.save}).then((function(t){t.isConfirmed?(r.handleSubmit(e),F.a.fire(W[a].swal.saved,"","success")):t.isDenied&&F.a.fire(W[a].swal.not_saved,"","info")}))},r.state={delay:100,result:"No result",password:"<NOPASS>",pass:"",preguntas:[],auditoria:"",area:"",_mounted:!1},r.handleScan=r.handleScan.bind(Object(ke.a)(r)),r}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Mounted!");var a=this.props.match.params.id;this.props.getAuditoria(a).then((function(a){e.setState({area:a.area,pass:a.password})})),this.props.preguntasAuditoria({id:a}).then((function(t){e.setState({preguntas:t.filter((function(e){return e})),auditoria:a,_mounted:!0},console.log("Updated!"))}))}},{key:"handleScan",value:function(e){null!==e&&this.setState({password:e})}},{key:"handleError",value:function(e){console.error(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.auth,r=a.proceed,s=a.lang,n=a.userLevel;if(!t.uid)return Object(m.jsx)(v.a,{to:"/signin"});if(!s)return null;if(this.state._mounted&&!r)return Object(m.jsx)(v.a,{to:"/"});var i={0:W[s].preguntas.crearPregunta.fix,1:W[s].preguntas.crearPregunta.contramedidas_temporales,2:W[s].preguntas.crearPregunta.parar_produccion};if(this.state.pass!==this.state.password){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[s].auditorias.responderAuditoria.scan_qr})}),Object(m.jsx)("div",{className:"titulo"})]}),Object(m.jsx)("center",{children:Object(m.jsx)(Ke.a,{delay:300,facingMode:"environment",onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}})})]})}return Object(m.jsxs)("div",{className:"",children:[Object(m.jsx)("div",{className:"test"}),Object(m.jsxs)("div",{className:"card x-depth-0",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[s].auditorias.responderAuditoria.responder_auditoria})}),Object(m.jsx)("div",{className:"titulo"})]}),Object(m.jsxs)("form",{className:"white section",onSubmit:this.Seguro,children:[this.state.preguntas&&this.state.preguntas.filter((function(e){return e.category>=n})).map((function(a,t){return Object(m.jsxs)("div",{className:"form-1 extra-padding-form",children:[Object(m.jsxs)(Te.a,{className:"legend-pregunta grey-text text-darken-3",component:"legend",children:[Object(m.jsxs)("h3",{children:[t+1,". ",a[s]]}),Object(m.jsx)("p",{className:"justify-text",children:a.description})]}),Object(m.jsxs)("div",{className:"campos extra-margin",children:[Object(m.jsxs)(Le.a,{className:"radio-group",row:!0,"aria-label":"gender",name:"resp-"+a.id,onChange:e.handleChange,children:[Object(m.jsx)(Fe.a,{className:"radio-button grey-text text-darken-3",value:"S\xed",control:Object(m.jsx)(Ie.a,{}),label:W[s].auditorias.responderAuditoria.si}),Object(m.jsx)(Fe.a,{className:"radio-button grey-text text-darken-3",value:"No",control:Object(m.jsx)(Ie.a,{}),label:W[s].auditorias.responderAuditoria.no})]}),e.state["resp-"+a.id]&&"No"===e.state["resp-"+a.id]?Object(m.jsxs)("div",{children:[Object(m.jsxs)("center",{children:[W[s].preguntas.detallesPregunta.plan_reaccion,": ",Object(m.jsx)("b",{children:i[a.reaction_plan]})]}),Object(m.jsx)(Be.a,{label:W[s].auditorias.responderAuditoria.justificacion,className:"label70",name:"just-"+a.id,onChange:e.handleChange})]}):null]})]},a.id)})),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{id:"Enviar",className:"aceptar",children:W[s].auditorias.responderAuditoria.enviar})})]})]})]})}}]),t}(n.Component),Qe=Object(T.d)(Object(j.b)((function(e,a){return{auth:e.firebase.auth,lang:e.firebase.profile.lang,proceed:!((e.firestore.ordered.respuestas&&e.firestore.ordered.respuestas.filter((function(t){return t.answeredById===e.firebase.auth.uid&&t.auditoria===a.match.params.id})).length)>0),preguntas:e.firestore.ordered.preguntas,userLevel:e.firebase.profile.userLevel}}),(function(e){return{createAuditoria:function(a){return e(_(a))},preguntasAuditoria:function(a){return e(function(e){return function(){var a=Object(A.a)(S.a.mark((function a(t,r,s){var n,i,c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.getFirebase,n=s.getFirestore,a.next=3,P(t,n,"auditorias",e.id);case 3:return i=a.sent,a.next=6,Promise.all(i.preguntas.map(function(){var e=Object(A.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,n,"preguntas",a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())).then((function(e){return e})).catch((function(e){console.log(e)}));case 6:return c=a.sent,console.log("this is X before",c),t({type:"SUCCESSFULLY_EXTRACTED_PREGUNTAS_FROM_AUDITORIA"},c),a.abrupt("return",c);case 10:case"end":return a.stop()}}),a)})));return function(e,t,r){return a.apply(this,arguments)}}()}(a))},respuestaPregunta:function(a){return e((t=a,function(e,a,r){r.getFirebase;var s,n=(0,r.getFirestore)(),i=a().firebase.profile,c=a().firebase.auth.uid,o=t.map((function(e){return e.answeredBy=i.firstName+" "+i.lastName,e.answeredById=c,e.answeredAt=new Date,e})),l=Object(Ne.a)(o);try{for(l.s();!(s=l.n()).done;){var u=s.value;n.collection("respuestas").add(u).then((function(){e({type:"CREATE_RESPUESTA_PREGUNTA"},t)})).catch((function(a){e({type:"CREATE_RESPUESTA_PREGUNTA_ERROR"},a)}))}}catch(d){l.e(d)}finally{l.f()}}));var t},getAuditoria:function(a){return e(D(a))}}})),Object(I.firestoreConnect)([{collection:"respuestas",orderBy:["answeredAt","asc"]}]))(Ge),We=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={preguntas:[],auditoria:""},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id;this.setState({auditoria:a}),this.props.preguntasAuditoriaVoting({id:a}).then((function(a){e.setState({preguntas:a})}))}},{key:"render",value:function(){var e=this.props,a=e.auth,t=e.lang;return a.uid?t?Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"",children:W[t].preguntas.detallesPreguntasAuditoria.respuestas_auditoria})})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)("div",{className:"",children:this.state.preguntas&&this.state.preguntas.map((function(e){return Object(m.jsx)("div",{className:"",children:Object(m.jsx)(Re,{pregunta:e,lang:t})},e.id)}))})})]}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),ze=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,lang:e.firebase.profile.lang}}),(function(e){return{preguntasAuditoriaVoting:function(a){return e(function(e){return function(){var a=Object(A.a)(S.a.mark((function a(t,r,s){var n,i,c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.getFirebase,n=s.getFirestore,a.next=3,P(t,n,"auditorias",e.id);case 3:return i=a.sent,a.next=6,Promise.all(i.preguntas.map(function(){var a=Object(A.a)(S.a.mark((function a(r){var s,i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(t,n,"preguntas",r);case 2:return s=a.sent,a.next=5,R(t,n,"respuestas","auditoria_pregunta",e.id+"_"+r);case 5:return i=a.sent,a.abrupt("return",Object(N.a)(Object(N.a)({},s),{},{respuestas:i}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())).then((function(e){return e})).catch((function(e){console.log(e)}));case 6:return c=a.sent,t({type:"SUCCESSFULLY_EXTRACTED_RESPUESTAS_PREGUNTAS_FROM_AUDITORIA"},c),a.abrupt("return",c);case 9:case"end":return a.stop()}}),a)})));return function(e,t,r){return a.apply(this,arguments)}}()}(a))}}})))(We),He=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={category:4,description:"",reaction_plan:"",english:"",spanish:""},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeSelect=function(a){e.setState({category:a.target.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.editPregunta(e.props.match.params.id,e.state),e.props.history.push("/preguntas")},e.Seguro=function(a){a.preventDefault(),F.a.fire({title:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Save",denyButtonText:"Don't save"}).then((function(t){t.isConfirmed?(e.handleSubmit(a),F.a.fire("Saved!","","success")):t.isDenied&&F.a.fire("Changes are not saved","","info")}))},e.handleChangeSelectRP=function(a){e.setState({reaction_plan:a.target.value})},e}return Object(u.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,a=this.props.match.params.id;this.props.getPregunta(a).then((function(a){e.setState({category:a.category,description:a.description,reaction_plan:a.reaction_plan,english:a.english,spanish:a.spanish})}))}},{key:"render",value:function(){var e=this.props,a=e.auth,t=e.lang;return a.uid?t?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/preguntas"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"titulo",children:W[t].preguntas.crearPregunta.editar_pregunta})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.Seguro,children:Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"english",value:this.state.english,placeholder:W[t].preguntas.crearPregunta.crear_pregunta+" [EN]",onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"spanish",value:this.state.spanish,placeholder:W[t].preguntas.crearPregunta.crear_pregunta+" [ES]",onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"description",value:this.state.description,placeholder:W[t].preguntas.crearPregunta.descripcion,onChange:this.handleChange})}),Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"reaction_plan",value:this.state.reaction_plan,onChange:this.handleChangeSelectRP,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[t].preguntas.crearPregunta.plan_reaccion})}),Object(m.jsx)(Z.a,{value:0,children:W[t].preguntas.crearPregunta.fix}),Object(m.jsx)(Z.a,{value:1,children:W[t].preguntas.crearPregunta.contramedidas_temporales}),Object(m.jsx)(Z.a,{value:2,children:W[t].preguntas.crearPregunta.parar_produccion})]})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsxs)("div",{className:"footer-single-flex",children:[Object(m.jsx)($.a,{id:"select-level",children:W[t].preguntas.crearPregunta.categoria}),Object(m.jsxs)(M.a,{labelId:"select-level",id:"level",value:this.state.category,onChange:this.handleChangeSelect,style:{width:"".concat(100,"px")},children:[Object(m.jsx)(Z.a,{value:4,children:"A"}),Object(m.jsx)(Z.a,{value:3,children:"B"}),Object(m.jsx)(Z.a,{value:2,children:"C"}),Object(m.jsx)(Z.a,{value:1,children:"D"})]})]})})]})})})}),Object(m.jsx)("div",{className:"footer-single",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.Seguro,children:W[t].preguntas.crearPregunta.editar})})]}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),Xe=Object(j.b)((function(e){return{auth:e.firebase.auth,lang:e.firebase.profile.lang}}),(function(e){return{editPregunta:function(a,t){return e(Ce(a,t))},getPregunta:function(a){return e(function(e){return function(a,t,r){return r.getFirebase,(0,r.getFirestore)().collection("preguntas").doc(e).get().then((function(e){if(e.exists)return e.data()})).catch((function(e){console.log(e)}))}}(a))}}}))(He),qe=t(188);t(523);var Je=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).reauthenticate=function(e){var a=qe.a.auth().currentUser,t=qe.a.auth.EmailAuthProvider.credential(a.email,e);return a.reauthenticateWithCredential(t)},e.changePassword=function(a,t){var r=e.props.lang;e.reauthenticate(a).then((function(){qe.a.auth().currentUser.updatePassword(t).then((function(){console.log("Password updated!"),e.props.history.push("/"),F.a.fire(W[r].swal.saved)})).catch((function(e){console.log(e)}))})).catch((function(a){e.setState({authError:a})}))},e.changeEmail=function(a,t){e.reauthenticate(a).then((function(){qe.a.auth().currentUser.updateEmail(t).then((function(){console.log("Email updated!")})).catch((function(e){console.log(e)}))})).catch((function(a){e.setState({authError:a})}))},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.name,a.target.value))},e.handleSubmit=function(a){a.preventDefault(),e.state.newPassword===e.state.newPasswordConfirm?e.changePassword(e.state.currentPassword,e.state.newPassword):e.setState({authError:{code:"password missmatch",message:"Las contrase\xf1as no coinciden, c\xe1mbielas y pruebe otra vez"}})},e}return Object(u.a)(t,[{key:"componentWillMount",value:function(){this.setState({currentPassword:"",newPassword:"",newPasswordConfirm:"",authError:null})}},{key:"render",value:function(){var e=this,a=this.props,t=a.auth,r=a.lang;return t.uid?r?Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/profile"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"titulo",children:W[r].auth.changePassword.cambiar_contrasena})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.handleSubmit,children:Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"password",id:"currentPassword",name:"currentPassword",placeholder:W[r].auth.changePassword.contrasena_actual,onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",placeholder:W[r].auth.changePassword.contrasena_nueva,onChange:this.handleChange})}),Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"password",id:"newPasswordConfirm",name:"newPasswordConfirm",placeholder:W[r].auth.changePassword.repite_contrasena,onChange:this.handleChange})})]})})})}),Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"cancelar",onClick:function(){e.props.history.push("/profile")},children:W[r].auth.changePassword.cancelar})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.handleSubmit,children:W[r].auth.changePassword.aceptar})})]}),Object(m.jsx)("div",{className:"footer-single",children:this.state.authError?Object(m.jsx)("p",{children:this.state.authError.message}):null})]}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),Ve=Object(j.b)((function(e){return{auth:e.firebase.auth,lang:e.firebase.profile.lang}}))(Je),Ye=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={lang:e.props.lang},e.handleChange=function(a){e.setState({lang:a.target.value},e.props.editIdioma(e.props.auth.uid,a.target.value))},e}return Object(u.a)(t,[{key:"render",value:function(){return Object(m.jsxs)(M.a,{labelId:"select-filter",id:"filter",value:this.state.lang,onChange:this.handleChange,style:{marginLeft:"".concat(10,"px")},children:[Object(m.jsx)(Z.a,{value:"english",children:"English"}),Object(m.jsx)(Z.a,{value:"spanish",children:"Espa\xf1ol"})]})}}]),t}(n.Component),Me=Object(v.g)(Object(j.b)((function(e){return{lang:e.firebase.profile.lang,auth:e.firebase.auth}}),(function(e){return{editIdioma:function(a,t){return e(function(e,a){return function(t,r,s){var n=s.getFirebase;s.getFirestore,n().functions().httpsCallable("changeLang")({uid:e,idioma:a}).then((function(e){console.log("Idioma cambiado:",a)}))}}(a,t))}}}))(Ye)),Ze=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props,a=e.userLevel,t=e.lang,r=e.auth,s=g;return r.uid?t?Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"box",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[t].opciones.opciones})})]}),Object(m.jsx)("div",{className:"",children:Object(m.jsxs)("div",{className:"",children:[0===a?Object(m.jsxs)("div",{className:"extra-margin",children:[Object(m.jsx)(p.b,{className:"form-1 overwrite-margin center-box default-height",to:"/procesos",children:W[t].opciones.procesos}),Object(m.jsx)(p.b,{className:"form-1 overwrite-margin center-box default-height",to:s.preguntas,children:W[t].opciones.preguntas}),Object(m.jsx)(p.b,{className:"form-1 overwrite-margin center-box default-height",to:s.sign_up,children:W[t].opciones.registrar_auditor})]}):null,Object(m.jsx)(p.b,{className:"form-1 overwrite-margin center-box default-height",to:s.change_password,children:W[t].opciones.cambiar_contrasena}),Object(m.jsxs)("div",{className:"form-1 overwrite-margin center-box default-height",children:[W[t].opciones.idioma+":"," ",Object(m.jsx)(Me,{})]})]})})]})}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),$e=Object(j.b)((function(e){return{lang:e.firebase.profile.lang,userLevel:e.firebase.profile.userLevel,auth:e.firebase.auth}}))(Ze),ea=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={proceso:"",urgencia:"",area:""},e.handleCancel=function(){var a=e.props.match.params.proceso?"/areas/"+e.props.match.params.proceso:"/profile";a=e.props.match.params.id?"/areas/"+e.state.proceso:a,e.props.history.push(a)},e.handleSubmit=function(a){a.preventDefault();var t=e.props.match.params.proceso?"/areas/"+e.props.match.params.proceso:"/profile",r=e.props.match.params.id;t=r?"/areas/"+e.state.proceso:t,r?e.props.editArea(r,e.state):e.props.createArea(e.state),e.props.history.push(t)},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeSelectProceso=function(a){e.setState({proceso:a.target.value})},e.handleChangeSelectUrgencia=function(a){e.setState({urgencia:a.target.value})},e.Seguro=function(a){a.preventDefault(),F.a.fire({title:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Save",denyButtonText:"Don't save"}).then((function(t){t.isConfirmed?(e.handleSubmit(a),F.a.fire("Saved!","","success")):t.isDenied&&F.a.fire("Changes are not saved","","info")}))},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.match.params.proceso)this.setState({proceso:this.props.match.params.proceso});else{var a=this.props.match.params.id;if(!a)return null;this.props.getArea(a).then((function(a){e.setState(Object(N.a)({},a))}))}}},{key:"render",value:function(){var e=this.props,a=e.auth,t=e.userLevel,r=e.lang,s=e.procesos;if(!a.uid)return Object(m.jsx)(v.a,{to:"/signin"});if(!r)return null;if(0!==t)return Object(m.jsx)(v.a,{to:"/"});var n=this.props.match.params.proceso?"/areas/"+this.props.match.params.proceso:"/profile";return Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:n})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsxs)("h2",{className:"",children:[W[r].area_proceso.crear," ",W[r].area_proceso.area]})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.Seguro,children:Object(m.jsxs)("div",{className:"form-2",children:[Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"area",value:this.state.area,placeholder:W[r].area_proceso.Area,onChange:this.handleChange})}),Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"urgencia",value:this.state.urgencia,onChange:this.handleChangeSelectUrgencia,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[r].area_proceso.urgencia})}),Object(m.jsx)(Z.a,{value:0,children:W[r].area_proceso.regular}),Object(m.jsx)(Z.a,{value:1,children:W[r].area_proceso.media}),Object(m.jsx)(Z.a,{value:2,children:W[r].area_proceso.prioridad}),Object(m.jsx)(Z.a,{value:3,children:W[r].area_proceso.alta_prioridad})]})}),Object(m.jsx)("div",{className:"limit-width",children:Object(m.jsxs)(M.a,{labelId:"select-filter",id:"filter",value:this.state.proceso,onChange:this.handleChangeSelectProceso,className:"this-is-also-input",displayEmpty:!0,disableUnderline:!0,children:[Object(m.jsx)(Z.a,{value:"",disabled:!0,children:Object(m.jsx)("div",{className:"placeholder-color",children:W[r].area_proceso.proceso_corresponde})}),s&&s.map((function(e){return Object(m.jsx)(Z.a,{className:"text-color",value:e.id,children:e.proceso},e.id)}))]})})]})})})}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"cancelar",onClick:this.handleCancel,children:W[r].auditorias.crearAuditoria.cancelar})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.Seguro,children:W[r].area_proceso.crear_area})})]})})]})}}]),t}(n.Component),aa=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang,procesos:e.firestore.ordered.procesos}}),(function(e){return{createArea:function(a){return e(function(e){return function(a,t,r){var s=(0,r.getFirestore)(),n=t().firebase.profile,i=t().firebase.auth.uid;s.collection("areas").add(Object(N.a)(Object(N.a)({},e),{},{authorFirstName:n.firstName,authorLastName:n.lastName,authorId:i,createdAt:new Date})).then((function(){a({type:"CREATE_AREA_SUCCESS"})})).catch((function(e){a({type:"CREATE_AREA_ERROR"},e)}))}}(a))},editArea:function(a,t){return e(function(e,a){return function(t,r,s){s.getFirebase;var n=(0,s.getFirestore)(),i=r().firebase.profile,c=r().firebase.auth.uid;n.collection("areas").doc(e).update(Object(N.a)(Object(N.a)({},a),{},{updatedAt:new Date,updatedBy:i.firstName+" "+i.lastName,editorId:c})).then((function(){t({type:"EDIT_AREA"},a)})).catch((function(e){console.log("Fall\xf3"),t({type:"EDIT_AREA_ERROR"},e)}))}}(a,t))},getArea:function(a){return e(function(e){return function(a,t,r){return r.getFirebase,(0,r.getFirestore)().collection("areas").doc(e).get().then((function(e){if(e.exists)return e.data()})).catch((function(e){console.log(e)}))}}(a))}}})),Object(I.firestoreConnect)([{collection:"procesos"},{collection:"areas"}]))(ea),ta=t(1039),ra=i.a.forwardRef((function(e,a){return Object(m.jsx)(G.a,Object(N.a)({direction:"up",ref:a},e))})),sa=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={proceso:"",preguntas:[],openB:!1,valueB:""},e.handleCancel=function(){e.props.history.push("/profile")},e.handleSubmit=function(a){a.preventDefault();var t=e.props.match.params.id,r={proceso:e.state.proceso,preguntas:e.state.preguntas.map((function(e){return e.id})),minCategory:Math.max.apply(Math,Object(x.a)(e.state.preguntas.map((function(e){return e.category}))))};t?e.props.editProceso(t,r):e.props.createProceso(r),e.props.history.push("/procesos")},e.handleChange=function(a){e.setState(Object(Q.a)({},a.target.id,a.target.value))},e.handleChangeSelectProceso=function(a){e.setState({proceso:a.target.value})},e.handleChangeAutocomplete=function(a,t){e.setState({valueB:t})},e.handleChangeSelectUrgencia=function(a){e.setState({urgencia:a.target.value})},e.handleClickOpen=function(){e.setState({openB:!0})},e.handleCancel=function(){e.props.history.push("/procesos")},e.handleDelete=function(a){var t=e.state.preguntas.filter((function(e){return e.id!==a}));e.setState({preguntas:t})},e.handleClose=function(){e.setState({openB:!1})},e.cantSend=function(){return!(e.state.preguntas&&e.state.preguntas.length>=5&&e.state.preguntas.length<=15)},e.handleCloseSave=function(a){e.setState((function(a){return{openB:!1,preguntas:Object(x.a)(new Set([].concat(Object(x.a)(a.preguntas),[e.state.valueB])))}}))},e.Seguro=function(a){var t=e.props.lang;if(e.cantSend())return null;a.preventDefault(),F.a.fire({title:W[t].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[t].swal.cancel,confirmButtonText:W[t].swal.save}).then((function(r){r.isConfirmed?(e.handleSubmit(a),F.a.fire(W[t].swal.saved,"","success")):r.isDenied&&F.a.fire(W[t].swal.not_saved,"","info")}))},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id;if(!a)return null;this.props.getProceso(a).then((function(a){e.setState({preguntas:a.preguntas.map((function(a){return e.props.preguntas.find((function(e){return e.id===a}))})),proceso:a.proceso})}))}},{key:"render",value:function(){var e=this,a=this.props,t=a.auth,r=a.userLevel,s=a.lang,n=["Admin","D","C","B","A"];return t.uid?s?0!==r?Object(m.jsx)(v.a,{to:"/"}):Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/procesos"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsxs)("h2",{className:"",children:[this.props.match.params.id?W[s].area_proceso.editar:W[s].area_proceso.crear," ",W[s].area_proceso.proceso]})})]}),Object(m.jsx)("div",{className:"form-1",children:Object(m.jsx)("div",{className:"",children:Object(m.jsx)("form",{className:"",onSubmit:this.Seguro,children:Object(m.jsx)("div",{className:"form-2",children:Object(m.jsx)("div",{className:"input-field",children:Object(m.jsx)("input",{type:"text",id:"proceso",value:this.state.proceso,placeholder:W[s].area_proceso.Proceso,onChange:this.handleChange})})})})})}),Object(m.jsx)("div",{className:"",children:Object(m.jsxs)("div",{className:"",children:[Object(m.jsx)("div",{className:"margin-bottom",children:this.state.preguntas&&this.state.preguntas.map((function(a,t){return Object(m.jsx)("div",{className:"form-1 overwrite-margin",children:Object(m.jsxs)("div",{className:"nueva-pregunta",children:[Object(m.jsxs)("div",{className:"nueva-pregunta-index",children:[t+1,"."]}),Object(m.jsx)("div",{className:"nueva-pregunta-main",children:a[s]}),Object(m.jsx)("div",{className:"nueva-pregunta-layer",children:n[a.category]}),Object(m.jsx)("div",{className:"nueva-pregunta-delete hover-cursor",onClick:function(){e.handleDelete(a.id)},children:Object(m.jsx)(f.a,{icon:b.g})})]})},t)}))}),Object(m.jsxs)(B.a,{open:this.state.openB,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",TransitionComponent:ra,children:[Object(m.jsx)(ge.a,{id:"form-dialog-title",children:W[s].auditorias.crearAuditoria.seleccionar_pregunta}),Object(m.jsxs)(K.a,{children:[Object(m.jsxs)(fe.a,{children:[W[s].auditorias.crearAuditoria.text1,Object(m.jsx)(p.b,{to:"/crear-pregunta",target:"_blank",rel:"noopener noreferrer",className:"red-text",children:W[s].auditorias.crearAuditoria.text2}),W[s].auditorias.crearAuditoria.text3]}),Object(m.jsx)(ta.a,{id:"valueB",name:"valueB",options:this.props.preguntas,onChange:this.handleChangeAutocomplete,getOptionLabel:function(e){return e[s]},renderInput:function(e){return Object(m.jsx)(Be.a,Object(N.a)(Object(N.a)({},e),{},{label:"Preguntas",variant:"outlined"}))}})]}),Object(m.jsxs)(U.a,{children:[Object(m.jsx)(L.a,{onClick:this.handleCloseSave,color:"primary",children:W[s].auditorias.crearAuditoria.agregar}),Object(m.jsx)(L.a,{onClick:this.handleClose,color:"secondary",children:W[s].auditorias.crearAuditoria.cancelar})]})]})]})}),Object(m.jsx)("div",{className:"footer-single",children:Object(m.jsx)("button",{className:"add-question",onClick:this.handleClickOpen,children:W[s].area_proceso.agregar_pregunta})}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"cancelar",onClick:this.handleCancel,children:W[s].auditorias.crearAuditoria.cancelar})}),Object(m.jsx)("div",{className:"center-box",children:Object(m.jsx)("button",{className:"aceptar",onClick:this.Seguro,children:W[s].area_proceso.crear_proceso})})]})})]}):null:Object(m.jsx)(v.a,{to:"/signin"})}}]),t}(n.Component),na=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang,procesos:e.firestore.ordered.procesos,preguntas:e.firestore.ordered.preguntas}}),(function(e){return{createProceso:function(a){return e(function(e){return function(a,t,r){var s=(0,r.getFirestore)(),n=t().firebase.profile,i=t().firebase.auth.uid;s.collection("procesos").add(Object(N.a)(Object(N.a)({},e),{},{authorFirstName:n.firstName,authorLastName:n.lastName,authorId:i,createdAt:new Date})).then((function(){a({type:"CREATE_PROCESO_SUCCESS"})})).catch((function(e){a({type:"CREATE_PROCESO_ERROR"},e)}))}}(a))},getProceso:function(a){return e(function(e){return function(a,t,r){return r.getFirebase,(0,r.getFirestore)().collection("procesos").doc(e).get().then((function(e){if(e.exists)return e.data()})).catch((function(e){console.log(e)}))}}(a))},editProceso:function(a,t){return e(function(e,a){return function(t,r,s){s.getFirebase;var n=(0,s.getFirestore)(),i=r().firebase.profile,c=r().firebase.auth.uid;n.collection("procesos").doc(e).update(Object(N.a)(Object(N.a)({},a),{},{updatedAt:new Date,updatedBy:i.firstName+" "+i.lastName,editorId:c})).then((function(){t({type:"EDIT_PROCESO"},a)})).catch((function(e){console.log("Fall\xf3"),t({type:"EDIT_PROCESO_ERROR"},e)}))}}(a,t))}}})),Object(I.firestoreConnect)([{collection:"procesos"},{collection:"preguntas"}]))(sa),ia=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.procesos,r=a.userLevel,s=a.lang;return a.auth.uid?0!==r?Object(m.jsx)(v.a,{to:"/"}):s?Object(m.jsxs)("div",{className:"padre-padre-titulo",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:"/profile"})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[s].area_proceso.procesos})})]}),Object(m.jsxs)("div",{className:"arroz-chino",children:[Object(m.jsx)(V,{where:"/crear-proceso"}),t&&t.map((function(a){return Object(m.jsxs)("div",{className:"tarjeta-auditor\xeda",children:[Object(m.jsx)(p.b,{to:"/areas/"+a.id,className:"tarjeta-proceso-half1",children:a.proceso.toUpperCase()}),Object(m.jsxs)("div",{className:"tarjeta-auditor\xeda-half2",children:[Object(m.jsx)(p.b,{to:"/crear-proceso/"+a.id,className:"button",children:Object(m.jsx)(f.a,{icon:b.c})}),Object(m.jsx)("div",{className:"button hover-cursor",onClick:function(){F.a.fire({title:W[s].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[s].swal.cancel,confirmButtonText:W[s].swal.save}).then((function(t){t.isConfirmed?(e.props.deleteProceso(a.id),F.a.fire(W[s].swal.saved,"","success")):t.isDenied&&F.a.fire(W[s].swal.not_saved,"","info")}))},children:Object(m.jsx)(f.a,{icon:b.g})})]})]},a.id)}))]})]}):null:Object(m.jsx)(v.a,{to:"signin"})}}]),t}(n.Component),ca=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang,procesos:e.firestore.ordered.procesos}}),(function(e){return{deleteProceso:function(a){return e(function(e){return function(a,t,r){r.getFirebase,(0,r.getFirestore)().collection("procesos").doc(e).delete()}}(a))}}})),Object(I.firestoreConnect)([{collection:"procesos"}]))(ia),oa=i.a.forwardRef((function(e,a){return Object(m.jsx)(G.a,Object(N.a)({direction:"up",ref:a},e))})),la=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=a.call.apply(a,[this].concat(s))).state={open:!1,count:[{id:"no",label:"no",value:35},{id:"yes",label:"yes",value:123}]},e.handleClickOpen=function(a){e.setState({open:!0},e.preguntaChart(a))},e.handleClose=function(){e.setState({open:!1})},e.preguntaChart=function(a){var t={yes:0,no:0};console.log("Respuestas:",e.props),e.props.respuestas.filter((function(e){return e.area===a})).forEach((function(e){"S\xed"===e.respuesta?t.yes+=1:"No"===e.respuesta&&(t.no+=1)})),e.setState({count:[{id:"no",label:"no",value:t.no},{id:"yes",label:"yes",value:t.yes}],actualText:Math.round(t.no/(t.yes+t.no)*100)})},e}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.areas,r=a.userLevel,s=a.lang;if(!a.auth.uid)return Object(m.jsx)(v.a,{to:"/signin"});if(0!==r)return Object(m.jsx)(v.a,{to:"/"});if(!s)return null;var n=this.props.match.params.proceso,i=t?t&&n?Object(x.a)(t).filter((function(e){return e.proceso===n})):Object(x.a)(t):[],c=n?"/procesos":"/profile",o=n?"/crear-area-props/"+n:"/crear-area";return Object(m.jsxs)("div",{className:"padre-padre-titulo",children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile",children:Object(m.jsx)(ae,{where:c})}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{children:W[s].area_proceso.areas})})]}),Object(m.jsxs)("div",{className:"arroz-chino",children:[Object(m.jsx)(V,{where:o}),i&&i.map((function(a){return Object(m.jsxs)("div",{className:"tarjeta-auditor\xeda",children:[Object(m.jsx)(p.b,{to:"/auditorias/"+(n?n+"/":" /")+a.id,className:"tarjeta-proceso-half1",children:a.area}),Object(m.jsxs)("div",{className:"tarjeta-auditor\xeda-half2",children:[Object(m.jsx)("div",{className:"button hover-cursor",onClick:function(){return e.handleClickOpen(a.id)},children:Object(m.jsx)(f.a,{icon:b.a})}),Object(m.jsx)(p.b,{to:"/crear-area/"+a.id,className:"button",children:Object(m.jsx)(f.a,{icon:b.c})}),Object(m.jsx)("div",{className:"button hover-cursor",onClick:function(){F.a.fire({title:W[s].swal.title,showDenyButton:!0,showConfirmButton:!0,denyButtonText:W[s].swal.cancel,confirmButtonText:W[s].swal.save}).then((function(t){t.isConfirmed?(e.props.deleteArea(a.id),F.a.fire(W[s].swal.saved,"","success")):t.isDenied&&F.a.fire(W[s].swal.not_saved,"","info")}))},children:Object(m.jsx)(f.a,{icon:b.g})})]})]},a.id)}))]}),Object(m.jsxs)(B.a,{open:this.state.open,TransitionComponent:oa,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(m.jsx)(ge.a,{id:"alert-dialog-slide-title",className:"popup-title",children:W[s].area_proceso.grafica_global}),Object(m.jsx)(K.a,{className:"graph-align-popup",children:Object(m.jsx)(Ee,{data:this.state.count,radius:.5,innerText:this.state.actualText+"%"})}),Object(m.jsx)(U.a,{children:Object(m.jsx)(L.a,{onClick:this.handleClose,color:"primary",children:W[s].aceptar})})]})]})}}]),t}(n.Component),ua=Object(T.d)(Object(j.b)((function(e){return{auth:e.firebase.auth,userLevel:e.firebase.profile.userLevel,lang:e.firebase.profile.lang,areas:e.firestore.ordered.areas,respuestas:e.firestore.ordered.respuestas}}),(function(e){return{deleteArea:function(a){return e(function(e){return function(a,t,r){r.getFirebase,(0,r.getFirestore)().collection("areas").doc(e).delete()}}(a))}}})),Object(I.firestoreConnect)([{collection:"areas"},{collection:"respuestas"}]))(la),da=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"padre-titulo mobile",children:[Object(m.jsx)("div",{className:"titulo destroy-on-mobile"}),Object(m.jsx)("div",{className:"titulo",children:Object(m.jsx)("h2",{className:"",children:"Herramientas##"})})]}),Object(m.jsxs)("div",{className:"arroz-chino only2row",children:[Object(m.jsx)(p.b,{className:"tarjeta-auditor\xeda center-box",children:"Auditor\xedas###"}),Object(m.jsx)(p.b,{className:"tarjeta-auditor\xeda center-box",children:"Auditores###"}),Object(m.jsx)(p.b,{className:"tarjeta-auditor\xeda center-box",children:"Preguntas###"}),Object(m.jsx)(p.b,{className:"tarjeta-auditor\xeda center-box",children:"Procesos###"})]})]})}}]),t}(n.Component),ha=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=g;return Object(m.jsx)(p.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(O,{}),Object(m.jsxs)(v.d,{children:[Object(m.jsx)(v.b,{path:"/herramientas",component:da}),Object(m.jsx)(v.b,{exact:!0,path:e.auditorias,component:re}),Object(m.jsx)(v.b,{exact:!0,path:"/auditorias/:proceso/:area",component:re}),Object(m.jsx)(v.b,{path:e.auditoria,component:De}),Object(m.jsx)(v.b,{path:e.profile,component:$e}),Object(m.jsx)(v.b,{path:e.sign_in,component:ne}),Object(m.jsx)(v.b,{path:e.sign_up,component:ce}),Object(m.jsx)(v.b,{path:e.responder_auditoria_redirect,component:Qe}),Object(m.jsx)(v.b,{exact:!0,path:e.crear_auditoria,component:he}),Object(m.jsx)(v.b,{path:e.crear_auditoria+"/:id",component:he}),Object(m.jsx)(v.b,{path:"/crear-auditoria-props/:proceso/:area",component:he}),Object(m.jsx)(v.b,{path:e.preguntas,component:we}),Object(m.jsx)(v.b,{path:e.crear_pregunta,component:Ae}),Object(m.jsx)(v.b,{path:e.preguntas_detalles_redirect,component:Re}),Object(m.jsx)(v.b,{path:e.detalles_preguntas_auditoria_redirect,component:ze}),Object(m.jsx)(v.b,{path:e.editar_pregunta_redirect,component:Xe}),Object(m.jsx)(v.b,{path:e.change_password,component:Ve}),Object(m.jsx)(v.b,{exact:!0,path:"/crear-area",component:aa}),Object(m.jsx)(v.b,{exact:!0,path:"/crear-area-props/:proceso",component:aa}),Object(m.jsx)(v.b,{path:"/crear-area/:id",component:aa}),Object(m.jsx)(v.b,{exact:!0,path:"/crear-proceso",component:na}),Object(m.jsx)(v.b,{path:"/crear-proceso/:id",component:na}),Object(m.jsx)(v.b,{path:"/procesos",component:ca}),Object(m.jsx)(v.b,{exact:!0,path:"/areas",component:ua}),Object(m.jsx)(v.b,{path:"/areas/:proceso",component:ua})]})]})})}}]),t}(n.Component),pa=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,1048)).then((function(a){var t=a.getCLS,r=a.getFID,s=a.getFCP,n=a.getLCP,i=a.getTTFB;t(e),r(e),s(e),n(e),i(e)}))},ja={authError:null},ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN_ERROR":return console.log("login error"),Object(N.a)(Object(N.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(N.a)(Object(N.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(N.a)(Object(N.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(N.a)(Object(N.a)({},e),{},{authError:a.err.message});default:return e}},fa={},ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_AREA_SUCCESS":return console.log("create area success"),e;case"CREATE_AREA_ERROR":return console.log("create area error"),e;default:return e}},ma={},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_PROCESO_SUCCESS":return console.log("create proceso success"),e;case"CREATE_PROCESO_ERROR":return console.log("create proceso error"),e;default:return e}},va={},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_AUDITORIA_SUCCESS":return console.log("create auditoria success",a.auditoria),e;case"CREATE_AUDITORIA_ERROR":return console.log("create auditoria error",a.err),e;case"SUCCESSFULLY_EXTRACTED_PREGUNTAS_FROM_AUDITORIA":case"SUCCESSFULLY_EXTRACTED_RESPUESTAS_PREGUNTAS_FROM_AUDITORIA":return e;case"FAILED_EXTRACT_PREGUNTAS_FROM_AUDITORIA":return console.log("create pregunta error",a.err),e;default:return e}},Na=t(186),Ca=Object(T.c)({auth:ba,auditoria:xa,area:ga,proceso:Oa,firestore:Na.firestoreReducer,firebase:I.firebaseReducer}),ya=t(540),wa=t(242);t(943),t(523);wa.a.initializeApp({apiKey:"AIzaSyAh_1nahadyMVGyFn5uVk3Ibg6l1W6kP7U",authDomain:"gst-app-18bf6.firebaseapp.com",projectId:"gst-app-18bf6",storageBucket:"gst-app-18bf6.appspot.com",messagingSenderId:"313627774403",appId:"1:313627774403:web:b9f93efea81137b3570176"}),wa.a.firestore().settings({timestampsInSnapshots:!0});var Sa=wa.a,Aa=Object(T.e)(Ca,Object(T.d)(Object(T.a)(ya.a.withExtraArgument({getFirebase:I.getFirebase,getFirestore:Na.getFirestore})),Object(Na.reduxFirestore)(Sa),Object(I.reactReduxFirebase)(Sa,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));Aa.firebaseAuthIsReady.then((function(){o.a.render(Object(m.jsx)(j.a,{store:Aa,children:Object(m.jsx)(ha,{})}),document.getElementById("root"))})),pa()}},[[944,1,2]]]);
//# sourceMappingURL=main.614e018a.chunk.js.map